<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">

	<head>
		<meta http-equiv="Content-Type" content="text/html;charset=UTF-8">
		<title>Document</title>
		<script src="../../script/libs/knockout/knockout-3.3.0.js" type="text/javascript" charset="utf-8"></script>
	</head>

	<body>
		<script>
			var test = function() {
				var self = this;
				var elem = document.getElementById("bankCard");
				self.str = ko.observable('');
				console.log(elem);
				
				if (str.length > num) {
					var c = str.replace(/\s/g, "");
					if (str != "" && c.length > 4 && c.length % 4 == 1) {
						$('#bankCard').val(str.substring(0, str.length - 1) + " " + str.substring(str.length - 1, str.length));
					}
				}
			}
			
			ko.observable(test);
			var num = 0;

			function inputAccount() {
				var elem = document.getElementById("bankCard");
				var str = elem.value;
				console.log(elem);
				if (str.length > num) {
					var c = str.replace(/\s/g, "");
					if (str != "" && c.length > 4 && c.length % 4 == 1) {
						$('#bankCard').val(str.substring(0, str.length - 1) + " " + str.substring(str.length - 1, str.length));
					}
				}
				if (elem.setSelectionRange) { //W3C  
					setTimeout(function() {
						elem.setSelectionRange(elem.value.length, elem.value.length);
						elem.focus();
					}, 0);
				} else if (elem.createTextRange) { //IE  
					var textRange = elem.createTextRange();
					textRange.moveStart("character", elem.value.length);
					textRange.moveEnd("character", 0);
					textRange.select();
				}
				num = str.length;
			}
		</script>

		<input type="text" name="" oninput="inputAccount()" id="bankCard" />
	</body>

</html>